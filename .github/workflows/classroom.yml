name: Autograding Tests
'on':
- push
- repository_dispatch
permissions:
  checks: write
  actions: read
  contents: read
jobs:
  run-autograding-tests:
    runs-on: ubuntu-latest
    if: github.actor != 'github-classroom[bot]'
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    - name: 'Task 1: Hello, world (debug)'
      id: task-1-hello-world-debug
      uses: classroom-resources/autograding-io-grader@v1
      with:
        test-name: 'Task 1: Hello, world (debug)'
        setup-command: ''
        command: python hello_world.py
        input: ''
        expected-output: Hello, world!
        comparison-method: exact
        timeout: 10
        max-score: 1
    - name: 'Task 2: Greeting with a name (debug)'
      id: task-2-greeting-with-a-name-debug
      uses: classroom-resources/autograding-io-grader@v1
      with:
        test-name: 'Task 2: Greeting with a name (debug)'
        setup-command: ''
        command: python greeting.py Alice
        input: ''
        expected-output: Hello, Alice!
        comparison-method: exact
        timeout: 10
        max-score: 1
    - name: 'Task 3: Even or odd (debug)'
      id: task-3-even-or-odd-debug
      uses: classroom-resources/autograding-io-grader@v1
      with:
        test-name: 'Task 3: Even or odd (debug)'
        setup-command: ''
        command: python even_or_odd.py 9
        input: ''
        expected-output: odd
        comparison-method: exact
        timeout: 10
        max-score: 1
    - name: 'Task 3: Even or odd 2 (debug)'
      id: task-3-even-or-odd-2-debug
      uses: classroom-resources/autograding-io-grader@v1
      with:
        test-name: 'Task 3: Even or odd 2 (debug)'
        setup-command: ''
        command: python even_or_odd.py 4
        input: ''
        expected-output: even
        comparison-method: exact
        timeout: 10
        max-score: 1
    - name: 'Task 5: CSV shape (debug)'
      id: task-5-csv-shape-debug
      uses: classroom-resources/autograding-io-grader@v1
      with:
        test-name: 'Task 5: CSV shape (debug)'
        setup-command: bash -lc 'printf "1,2,3\n4,5,6\n7,8,9\n10,11,12\n" >prob5-data-test-260205.csv'
        command: python csv_shape.py prob-5-data-test-260205.csv
        input: ''
        expected-output: 4 3
        comparison-method: exact
        timeout: 10
        max-score: 1
    - name: 'Task 4: Sum a list'
      id: task-4-sum-a-list
      uses: classroom-resources/autograding-command-grader@v1
      with:
        test-name: 'Task 4: Sum a list'
        setup-command: ''
        command: bash -lc 'printf "1,2,3,4\n" > hidden.csv && pytest -q --data-file=hidden.csv
          --expected=10.0 --atol=1e-6'
        timeout: 10
        max-score: 1
    - name: Autograding Reporter
      uses: classroom-resources/autograding-grading-reporter@v1
      env:
        TASK-1-HELLO-WORLD-DEBUG_RESULTS: "${{steps.task-1-hello-world-debug.outputs.result}}"
        TASK-2-GREETING-WITH-A-NAME-DEBUG_RESULTS: "${{steps.task-2-greeting-with-a-name-debug.outputs.result}}"
        TASK-3-EVEN-OR-ODD-DEBUG_RESULTS: "${{steps.task-3-even-or-odd-debug.outputs.result}}"
        TASK-3-EVEN-OR-ODD-2-DEBUG_RESULTS: "${{steps.task-3-even-or-odd-2-debug.outputs.result}}"
        TASK-5-CSV-SHAPE-DEBUG_RESULTS: "${{steps.task-5-csv-shape-debug.outputs.result}}"
        TASK-4-SUM-A-LIST_RESULTS: "${{steps.task-4-sum-a-list.outputs.result}}"
      with:
        runners: task-1-hello-world-debug,task-2-greeting-with-a-name-debug,task-3-even-or-odd-debug,task-3-even-or-odd-2-debug,task-5-csv-shape-debug,task-4-sum-a-list
